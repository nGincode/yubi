import{r as n,j as a,F as N,a as e,H as b,L as v,T as d}from"./app.c80ce545.js";import{P as w,S as _}from"./PermissionData.9c7a1b6d.js";import{D as x,V as y}from"./DataTables.6ea16c13.js";import{B as T}from"./Button.701a07ed.js";import"./Input.9812c49a.js";function A(s){const o="accounts_users",i="Users",c=w("Auth",s.permission,s.groups.groups.data,o),[m,l]=n.exports.useState(!1),u=async r=>{if(r==="create"){var g=new FormData($("#createForm")[0]);try{await axios({method:"POST",url:"/api/users/create",data:g,headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${s.auth.user.token_api}`,"X-CSRF-TOKEN":s.csrf_token}}).then(t=>{setTimeout(()=>{l(!1)},5e3),d(t.data.response,t.data.message),t.data.response==="success"&&($("#DataTables").DataTable().ajax.reload(),$("#createForm")[0].reset(),$(".is-valid").removeClass("is-valid"))})}catch(t){setTimeout(()=>{l(!1)},5e3),d("error",t.message)}}},h={username:{required:!0,minlength:3,maxlength:50},email:{required:!0,email:!0},password:{required:!0,minlength:8},password_confirmation:{required:!0,minlength:8,equalTo:"#password"}},p={usernameUpdate:{required:!0,minlength:3,maxlength:50},emailUpdate:{required:!0,email:!0},passwordUpdate:{required:!0,minlength:8},passwordUpdateNew:{required:!0,minlength:8},passwordUpdateNew_confirmation:{required:!0,minlength:8,equalTo:"#passwordUpdateNew"}},f=r=>{l(!0),r.preventDefault(),y("#createForm",h)?u("create"):l(!1)};return n.exports.useEffect(()=>{$("#main-wrapper").removeClass("menu-toggle"),$(".hamburger ").removeClass("is-active")},[]),a(N,{children:[e(b,{title:i}),e("div",{className:"row page-titles",children:a("div",{className:"breadcrumb",children:[e("li",{className:"breadcrumb-item",children:e("a",{children:"Accounts"})}),e("li",{className:"breadcrumb-item  active",children:e(v,{href:route(o),children:i})})]})}),e(_,{}),a("div",{id:"content",children:[c.create&&e("div",{className:"col-xl-12 ",children:a("div",{className:"card",children:[e("div",{className:"card-header coin-card",children:e("h4",{className:"card-title text-white",children:e("b",{children:i})})}),e("div",{className:"card-body",children:e("div",{className:"basic-form",children:a("form",{id:"createForm",onSubmit:f,children:[a("div",{className:"row",children:[e("div",{className:"mb-3 col-md-6",children:a("div",{className:"form-group",children:[e("label",{className:"form-label",htmlFor:"username",children:"Username"}),e("input",{type:"text",name:"username",id:"username",onChange:r=>{$("#username").val(r.target.value.replace(/[^\w\s]/gi,"").replace(" ","").toLowerCase())},className:"form-control",placeholder:"Username"})]})}),e("div",{className:"mb-3 col-md-6",children:a("div",{className:"form-group",children:[e("label",{className:"form-label",htmlFor:"email",children:"Email"}),e("input",{type:"text",name:"email",id:"email",onChange:r=>{$("#email").val(r.target.value.replace(/\s/g,"").toLowerCase())},className:"form-control",placeholder:"abc123@gmail.com"})]})})]}),a("div",{className:"row",children:[e("div",{className:"mb-3 col-md-6",children:a("div",{className:"form-group",children:[e("label",{className:"form-label",htmlFor:"password",children:"Password"}),e("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"*********"})]})}),e("div",{className:"mb-3 col-md-6",children:a("div",{className:"form-group",children:[e("label",{className:"form-label",htmlFor:"password_confirmation",children:"Confirm Password"}),e("input",{type:"password",name:"password_confirmation",id:"password_confirmation",className:"form-control",placeholder:"**********"})]})})]}),e("hr",{}),e(T,{type:"submit",className:"btn btn-primary",processing:m,children:"Submit"})]})})})]})}),c.view&&e("div",{className:"col-12",children:a("div",{className:"card",children:[e("div",{className:"card-header bg-secondary",children:e("h4",{className:"card-title  text-white",children:a("b",{children:["Data ",i]})})}),e("div",{className:"card-body",children:e("div",{className:"table-responsive",children:e(x,{columns:[{data:"username",title:"Username"},{data:"email",title:"Email"},{data:"last_login_at",title:"Last Login"},{data:"last_login_ip",title:"Last Login IP"},{data:"action",title:"Action",orderable:!1,width:50,className:"text-right"}],API:"/api/users",Method:"POST",Subject:"Users",setValidate:p,Action:c.managePerm,csrf_token:s.csrf_token,api_token:`Bearer ${s.auth.user.token_api}`})})})]})})]})]})}export{A as default};
