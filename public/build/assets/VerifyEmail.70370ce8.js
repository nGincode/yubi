import{u as T,r as l,j as i,a as e,H as w,L as o,T as m}from"./app.c80ce545.js";import{B as h}from"./Button.701a07ed.js";import{G as C}from"./Guest.c07678f8.js";function A({status:u,user:n,csrf_token:p}){const{post:c,processing:f}=T(),[d,b]=l.exports.useState(),[g,r]=l.exports.useState(!1),[v,N]=l.exports.useState(n.email),y=a=>{a.preventDefault(),c(route("verification.send"))},x=a=>{a.preventDefault(),k("update")},k=async a=>{if(a==="update"){var s=new FormData($("#createForm")[0]);s.append("id",n==null?void 0:n.uuid),s.append("emailChanged",!0),s.append("emailUpdate",d);try{await axios({method:"POST",url:"/api/users/update",data:s,headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${n.token_api}`,"X-CSRF-TOKEN":p}}).then(t=>{m(t.data.response,t.data.message),t.data.send&&(t.data.email&&N(t.data.email),r(!0),c(route("verification.send"))),setTimeout(()=>{r(!1)},5e3)})}catch(t){m("error",t.message),setTimeout(()=>{r(!1)},5e3)}}},E=a=>{b(a.target.value)};return i(C,{children:[e(w,{title:"Email Verification"}),e("div",{className:"authincation h-100",children:e("div",{className:"container h-100 mt-4",children:e("div",{className:"row justify-content-center h-100 align-items-center",children:e("div",{className:"col-md-6",children:e("div",{className:"authincation-content",children:e("div",{className:"row no-gutters",children:e("div",{className:"col-xl-12",children:i("div",{className:"auth-form",children:[e("div",{className:"text-center mb-3",children:e(o,{href:"/",children:e("center",{children:e("img",{src:"/assets/logo/yubi.png",alt:"",width:"150px",className:"img-fluid"})})})}),e("h4",{className:"text-center mb-4",children:"Verification Email"}),i("p",{children:["Thanks for signing up! Before getting started, could you verify your email address"," ",e("font",{color:"#5bcfc5",children:e("b",{children:v})})," ","by clicking on the link we just emailed to you? If you didn't receive the email, we will gladly send you another.",e("br",{})]}),u==="verification-link-sent"&&i("div",{className:"text-success",children:["A new verification link has been sent to the email address you provided during registration.",e("br",{})]}),e("div",{className:"mb-3 col-md-12",children:i("div",{className:"form-group",children:[e("label",{className:"form-label",children:"Change Your Email"}),e("input",{type:"email",name:"email",className:"form-control",placeholder:"abc123@gmail.com",style:{border:"1px #00000061 solid"},onChange:a=>{E(a)}})]})}),d?e("form",{onSubmit:x,children:i("div",{className:"text-center",children:[e(h,{className:"btn btn-primary btn-block",processing:g,children:"Change Email & Resend"}),e("br",{}),e(o,{href:route("logout"),method:"GET",as:"button",className:"btn btn-danger btn-block ",children:"Log Out"})]})}):e("form",{onSubmit:y,children:i("div",{className:"text-center",children:[e(h,{className:"btn btn-primary btn-block",processing:f,children:"Resend Verification Email"}),e("br",{}),e(o,{href:route("logout"),method:"GET",as:"button",className:"btn btn-danger btn-block ",children:"Log Out"})]})})]})})})})})})})})]})}export{A as default};
